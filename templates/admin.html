{% extends "base.html" %}
{% block title %}Área Administrativa{% endblock %}
{% block link %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}" />
{% endblock %}
{% block content %}

<div class="admin-container">
  <!-- Menu lateral -->
  <aside class="sidebar">
    <h2>Gerenciamento</h2>
    <ul>
      <li>
        <button type="button" onclick="loadIframe(cadastroUrl)">Cadastrar novo terreno</button>
      </li>
      <li>
        <button type="button" onclick="loadIframe(deletarUrl)">Deletar Terreno</button>
      </li>
      <li>
        <button type="button" onclick="loadIframe(addMembroDiretoria)">Adicionar membro da Diretoria</button>
      </li>
    </ul>
    <h2>Usuários</h2>
    <ul>
      <li>
        <a href="{{ url_for('cadastro_usuario') }}">
          <button type="button">Cadastrar novo usuário</button>
        </a>
      </li>
      <li>
        <a href="{{ url_for('logout') }}">
          <button type="button">Logout</button>
        </a>
      </li>
    </ul>
    <h2>Financeiro</h2>
    <ul>
      <li>
        <a href="{{ url_for('tesouraria') }}">
          <button type="button">Tesouraria</button>
        </a>
      </li>
    </ul>
  </aside>

  <!-- Conteúdo principal -->
  <main class="main-content">
    <h1>Bem-vindo, {{ current_user.username }}!</h1>

    <!-- Tabela de Terrenos -->
    <h2>Lista de Terrenos</h2>
    <table>
      <tr>
        <th>Lote</th>
        <th>CPF</th>
        <th>Nome Completo</th>
      </tr>
      {% for terreno in terrenos %}
      <tr>
        <td>{{ terreno.lote }}</td>
        <td>{{ terreno.cpf }}</td>
        <td>{{ terreno.nome_completo }}</td>
      </tr>
      {% endfor %}
    </table>

    <!-- Paginação -->
    <div class="pagination">
      {% if pagination.has_prev %}
      <a href="{{ url_for('admin', page=pagination.prev_num) }}">
        <button type="button">Anterior</button>
      </a>
      {% else %}
      <span>Anterior</span>
      {% endif %}
      <span>Página {{ pagination.page }} de {{ pagination.pages }}</span>
      {% if pagination.has_next %}
      <a href="{{ url_for('admin', page=pagination.next_num) }}">
        <button type="button">Próximo</button>
      </a>
      {% else %}
      <span>Próximo</span>
      {% endif %}
    </div>

    <!-- Iframe onde as páginas são carregadas -->
    <iframe src="" class="content-iframe" id="contentIframe"></iframe>
  </main>
</div>

<script>
  const cadastroUrl = "{{ url_for('cadastro') }}";
  const deletarUrl = "{{ url_for('listar_terrenos_para_deletar') }}";
  const addMembroDiretoria = "{{ url_for('atualiza_membro_diretoria') }}";

  function loadIframe(url) {
    document.getElementById("contentIframe").src = url;
  }
</script>

{% endblock %}
